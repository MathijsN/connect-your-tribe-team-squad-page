{% render 'partials/head.liquid', title: person.name %}

<main class="detail-page">
  {% render 'partials/searchbar-while-searched.liquid' %}

  <article class="person-detail">

    <header class="detail-header">
      <h1 class="detail-title">
        <span class="detail-emoji">{{ person.vibe_emoji }}</span>
        {{ person.name }}
        <span class="detail-emoji">{{ person.vibe_emoji }}</span>
      </h1>
    </header>

    <section class="detail-grid">
      <figure class="detail-card detail-card--mugshot">
        <img
          class="detail-img"
          src="{% if person.mugshot %}https://fdnd.directus.app/assets/{{ person.mugshot }}?width=600&height=400&fit=cover{% else %}/assets/no-pic.jpg{% endif %}"
          alt="Mugshot van {{ person.name }}"
        >
      </figure>

      <section class="detail-card detail-card--about">
        <h2 class="detail-card-title">About</h2>
        {% if person.bio %}
          <p class="detail-text">{{ person.bio }}</p>
        {% else %}
          <p class="detail-text detail-text--muted">Geen bio ingevuld.</p>
        {% endif %}
      </section>

      <div class="detail-pill detail-pill--residency">
        {% if person.residency %}
          {{ person.residency }}
        {% else %}
          Woonplaats onbekend
        {% endif %}
      </div>

      <section class="detail-card detail-card--animal">
        <p class="detail-card-label">Favoriete dier</p>
        {% if person.fav_animal %}
          <p class="detail-card-value">{{ person.fav_animal }}</p>
        {% else %}
          <p class="detail-card-value detail-text--muted">—</p>
        {% endif %}
      </section>

      <figure class="detail-card detail-card--avatar">
        <img
          class="detail-img"
          src="{% if person.avatar %}https://fdnd.directus.app/assets/{{ person.avatar }}?width=400&height=500&fit=cover{% else %}/assets/no-pic.jpg{% endif %}"
          alt="Avatar van {{ person.name }}"
        >
      </figure>

      <div class="detail-pill detail-pill--season">
        {% if person.fav_season %}
          {{ person.fav_season }}
        {% else %}
          Seizoen onbekend
        {% endif %}
      </div>

      <section class="detail-card detail-card--metric">
        {% if person.length %}
          <p class="detail-card-value">{{ person.length }}</p>
        {% else %}
          <p class="detail-card-value detail-text--muted">—</p>
        {% endif %}
      </section>

    </section>

    {% comment %} <section class="detail-messages">
      <h2 class="detail-section-title">Berichten</h2> {% endcomment %}

      {% comment %} {% if messages and messages.size > 0 %}
        <ul class="detail-message-list">
          {% for message in messages %}
            <li class="detail-message">
              <p class="detail-message-from">{{ message.from }}</p>
              <p class="detail-message-text">{{ message.text }}</p>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="detail-text detail-text--muted">Nog geen berichten.</p>
      {% endif %} {% endcomment %}

         <section class="detail-messages">
        <h2>Berichten</h2>
        {% for message in messages %}
            <div class="message-item">
                <p class="message-from">{{ message.from }}</p>
                <p class="message-text">{{ message.text }}</p>
            </div>
        {% else %}
            <p>Nog geen berichten voor {{ person.name }}.</p>
        {% endfor %}
    </section>


    <section class="detail-form">
        <h2>Laat een bericht achter</h2>
        <form action="/student/{{ person.id }}" method="post">
            <label>Naam: <input type="text" name="from" required></label>
            <label>Bericht: <textarea name="text" required></textarea></label>
            <button type="submit">Verstuur</button>
        </form>
    </section>

  </article>
</main>